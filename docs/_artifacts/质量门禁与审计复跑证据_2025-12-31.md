# 质量门禁与审计复跑证据（2025-12-31）

> 目的：在“前后端一致性清零 + 全站乐高化（可拖拽/可记忆/可恢复）”改动后，复跑仓库自带的审计与质量门禁脚本，留存可复验证据。

## 执行命令

- `pnpm audit:actions-ui`
- `pnpm audit:routes`
- `pnpm audit:tenant-scope`
- `pnpm type-check`
- `pnpm lint`

## 输出摘要

- `audit:actions-ui`：`unreferenced exports (UI scope) = 0`
- `audit:routes`：`OK: 未发现断链路由引用`
- `audit:tenant-scope`：`OK: tenant-scoped 模型列表与 guard 目标清单已生成`
- `type-check`：`tsc --noEmit` 通过
- `lint`：`eslint` 通过

## 完整输出

### `pnpm audit:actions-ui`

```
[actions-ui-audit] actions exports: 221
[actions-ui-audit] unique action names: 221
[actions-ui-audit] scanned src files (excluding src/actions): 277
[actions-ui-audit] unreferenced exports (UI scope): 0
```

### `pnpm audit:routes`

```
[route-audit] app routes: 51
[route-audit] route refs: 154 (unique: 76)
[route-audit] OK: 未发现断链路由引用
```

### `pnpm audit:tenant-scope`

```
[tenant-scope-audit] prisma models: 53
[tenant-scope-audit] tenant-scoped models: 29
[tenant-scope-audit] guard targets: 26
[tenant-scope-audit] exclusions: 3

[tenant-scope-audit] OK: tenant-scoped 模型列表与 tenant-scope-guard 目标清单已生成。
```

### `pnpm type-check`

```
tsc --noEmit
```

### `pnpm lint`

```
eslint
```

