# 律时移动端 - UI 设计适配规范

> **版本**: 1.0  
> **创建日期**: 2026-01-01  
> **依据**: `docs/LegalMind设计语言规范.md`

---

## 一、设计理念

### 1.1 核心哲学

沿用 LegalMind 设计语言的核心理念，针对移动端进行适配：

> **"Authority through Design, Efficiency through Intelligence"**  
> **"设计彰显权威，智能驱动效率"**

### 1.2 移动端设计原则

| 原则 | 描述 | 实践 |
|------|------|------|
| **触控优先** | 针对手指操作优化 | 点击区域 ≥ 48dp |
| **信息密度** | 适应小屏幕 | 卡片化布局、折叠展开 |
| **单手操作** | 核心操作可单手完成 | 底部导航、下拉刷新 |
| **一致性** | 与 Web 端视觉统一 | 共享设计语言 Token |

---

## 二、色彩系统

### 2.1 品牌主色

与 Web 端完全一致：

```dart
// lib/core/config/theme_config.dart
class LegalMindColors {
  // 品牌橙
  static const Color primary50 = Color(0xFFFFF4F1);
  static const Color primary100 = Color(0xFFFFE6DC);
  static const Color primary200 = Color(0xFFFFCCB8);
  static const Color primary300 = Color(0xFFFFB394);
  static const Color primary400 = Color(0xFFFF9970);
  static const Color primary500 = Color(0xFFFF6B35);  // 核心品牌色
  static const Color primary600 = Color(0xFFE55A2B);
  static const Color primary700 = Color(0xFFCC4A1F);
  static const Color primary800 = Color(0xFFB23A13);
  static const Color primary900 = Color(0xFF992A07);
  
  // 渐变
  static const LinearGradient primaryGradient = LinearGradient(
    begin: Alignment.topLeft,
    end: Alignment.bottomRight,
    colors: [primary500, primary600],
  );
}
```

### 2.2 中性色阶

```dart
class NeutralColors {
  static const Color neutral50 = Color(0xFFF8F9FA);   // 页面背景
  static const Color neutral100 = Color(0xFFF1F3F4); // 卡片背景
  static const Color neutral200 = Color(0xFFE9ECEF); // 边框
  static const Color neutral300 = Color(0xFFDEE2E6);
  static const Color neutral400 = Color(0xFFCED4DA); // 占位符
  static const Color neutral500 = Color(0xFFADB5BD); // 辅助文字
  static const Color neutral600 = Color(0xFF6C757D); // 次要文字
  static const Color neutral700 = Color(0xFF495057); // 正文
  static const Color neutral800 = Color(0xFF343A40); // 标题
  static const Color neutral900 = Color(0xFF212529); // 主标题
}
```

### 2.3 功能色

```dart
class FunctionalColors {
  static const Color success = Color(0xFF22C55E);
  static const Color warning = Color(0xFFF59E0B);
  static const Color error = Color(0xFFEF4444);
  static const Color info = Color(0xFF3B82F6);
}
```

### 2.4 深色模式

```dart
// 深色模式配色
class DarkModeColors {
  static const Color background = Color(0xFF1A1A1A);
  static const Color foreground = Color(0xFFFAFAFA);
  static const Color card = Color(0xFF262626);
  static const Color muted = Color(0xFF333333);
  static const Color border = Color(0xFF404040);
}
```

---

## 三、排版系统

### 3.1 字体栈

```dart
// 移动端字体配置
class LegalMindTypography {
  static const String fontFamily = 'Inter';
  static const String fontFamilyChinese = 'PingFang SC';
  
  static final TextTheme textTheme = TextTheme(
    displayLarge: TextStyle(fontSize: 36, fontWeight: FontWeight.w700, height: 1.1),
    displayMedium: TextStyle(fontSize: 30, fontWeight: FontWeight.w700, height: 1.2),
    displaySmall: TextStyle(fontSize: 24, fontWeight: FontWeight.w600, height: 1.33),
    headlineLarge: TextStyle(fontSize: 20, fontWeight: FontWeight.w600, height: 1.4),
    headlineMedium: TextStyle(fontSize: 18, fontWeight: FontWeight.w600, height: 1.55),
    headlineSmall: TextStyle(fontSize: 16, fontWeight: FontWeight.w600, height: 1.5),
    titleLarge: TextStyle(fontSize: 16, fontWeight: FontWeight.w500, height: 1.5),
    titleMedium: TextStyle(fontSize: 14, fontWeight: FontWeight.w500, height: 1.43),
    titleSmall: TextStyle(fontSize: 12, fontWeight: FontWeight.w500, height: 1.33),
    bodyLarge: TextStyle(fontSize: 16, fontWeight: FontWeight.w400, height: 1.5),
    bodyMedium: TextStyle(fontSize: 14, fontWeight: FontWeight.w400, height: 1.43),
    bodySmall: TextStyle(fontSize: 12, fontWeight: FontWeight.w400, height: 1.33),
    labelLarge: TextStyle(fontSize: 14, fontWeight: FontWeight.w500, height: 1.43),
    labelMedium: TextStyle(fontSize: 12, fontWeight: FontWeight.w500, height: 1.33),
    labelSmall: TextStyle(fontSize: 10, fontWeight: FontWeight.w500, height: 1.6),
  );
}
```

### 3.2 字号对应关系

| 用途 | Web 端 | 移动端 | Flutter Style |
|------|--------|--------|---------------|
| 页面主标题 | 24px | 24px | `displaySmall` |
| 卡片标题 | 20px | 18px | `headlineMedium` |
| 正文 | 16px | 14px | `bodyMedium` |
| 辅助文字 | 14px | 12px | `bodySmall` |
| 时间戳 | 12px | 10px | `labelSmall` |

---

## 四、间距与尺寸

### 4.1 间距规范

```dart
class LegalMindSpacing {
  static const double xs = 4;   // 0.25rem
  static const double sm = 8;   // 0.5rem
  static const double md = 16;  // 1rem
  static const double lg = 24;  // 1.5rem
  static const double xl = 32;  // 2rem
  static const double xxl = 48; // 3rem
  
  // 页面边距
  static const EdgeInsets pagePadding = EdgeInsets.symmetric(horizontal: 16);
  static const EdgeInsets cardPadding = EdgeInsets.all(16);
}
```

### 4.2 圆角规范

```dart
class LegalMindRadius {
  static const double sm = 4;      // 小型元素
  static const double md = 8;      // 中型元素
  static const double lg = 12;     // 大型元素（主圆角）
  static const double xl = 16;     // 特大元素
  static const double full = 9999; // 圆形
  
  static final BorderRadius cardRadius = BorderRadius.circular(lg);
  static final BorderRadius buttonRadius = BorderRadius.circular(md);
  static final BorderRadius chipRadius = BorderRadius.circular(sm);
}
```

### 4.3 触控尺寸

```dart
class TouchTargets {
  static const double minTapSize = 48;   // 最小点击区域
  static const double buttonHeight = 48; // 按钮高度
  static const double inputHeight = 48;  // 输入框高度
  static const double listItemHeight = 60; // 列表项最小高度
  static const double fabSize = 56;      // FAB 尺寸
}
```

---

## 五、阴影系统

```dart
class LegalMindShadows {
  // 品牌阴影（用于主按钮）
  static final BoxShadow brandShadow = BoxShadow(
    color: LegalMindColors.primary500.withOpacity(0.15),
    blurRadius: 12,
    offset: Offset(0, 4),
  );
  
  // 卡片阴影
  static final BoxShadow cardShadow = BoxShadow(
    color: Colors.black.withOpacity(0.08),
    blurRadius: 8,
    offset: Offset(0, 2),
  );
  
  // 卡片悬停阴影（用于按下效果）
  static final BoxShadow cardShadowElevated = BoxShadow(
    color: Colors.black.withOpacity(0.12),
    blurRadius: 16,
    offset: Offset(0, 4),
  );
  
  // 浮层阴影
  static final BoxShadow overlayhadow = BoxShadow(
    color: Colors.black.withOpacity(0.15),
    blurRadius: 30,
    offset: Offset(0, 8),
  );
}
```

---

## 六、动效系统

### 6.1 动效时长

```dart
class LegalMindDurations {
  static const Duration fast = Duration(milliseconds: 150);
  static const Duration normal = Duration(milliseconds: 200);
  static const Duration slow = Duration(milliseconds: 300);
  static const Duration slower = Duration(milliseconds: 500);
}
```

### 6.2 缓动曲线

```dart
class LegalMindCurves {
  static const Curve standard = Curves.easeInOut;
  static const Curve decelerate = Curves.easeOut;
  static const Curve accelerate = Curves.easeIn;
  static const Curve overshoot = Curves.elasticOut;
}
```

### 6.3 常用动效

```dart
// 页面切换
PageRouteBuilder(
  transitionDuration: LegalMindDurations.slow,
  pageBuilder: (_, __, ___) => TargetPage(),
  transitionsBuilder: (_, animation, __, child) {
    return FadeTransition(
      opacity: animation,
      child: SlideTransition(
        position: Tween<Offset>(
          begin: Offset(0, 0.05),
          end: Offset.zero,
        ).animate(CurvedAnimation(
          parent: animation,
          curve: LegalMindCurves.decelerate,
        )),
        child: child,
      ),
    );
  },
);

// 卡片按下效果
class AnimatedCard extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTapDown: (_) => _controller.forward(),
      onTapUp: (_) => _controller.reverse(),
      onTapCancel: () => _controller.reverse(),
      child: AnimatedBuilder(
        animation: _animation,
        builder: (_, child) => Transform.scale(
          scale: 1 - (_animation.value * 0.02),
          child: Container(
            decoration: BoxDecoration(
              boxShadow: [
                BoxShadow(
                  blurRadius: 8 + (8 * _animation.value),
                  color: Colors.black.withOpacity(0.08 + 0.04 * _animation.value),
                ),
              ],
            ),
            child: child,
          ),
        ),
        child: child,
      ),
    );
  }
}
```

---

## 七、核心组件

### 7.1 按钮 (LawButton)

```dart
// lib/shared/widgets/buttons/law_button.dart
class LawButton extends StatelessWidget {
  final String label;
  final VoidCallback? onPressed;
  final LawButtonVariant variant;
  final bool isLoading;
  
  @override
  Widget build(BuildContext context) {
    return Container(
      height: TouchTargets.buttonHeight,
      decoration: BoxDecoration(
        gradient: variant == LawButtonVariant.primary 
          ? LegalMindColors.primaryGradient 
          : null,
        borderRadius: LegalMindRadius.buttonRadius,
        boxShadow: variant == LawButtonVariant.primary 
          ? [LegalMindShadows.brandShadow] 
          : null,
      ),
      child: ElevatedButton(
        onPressed: isLoading ? null : onPressed,
        child: isLoading 
          ? SizedBox(width: 20, height: 20, child: CircularProgressIndicator(strokeWidth: 2))
          : Text(label),
      ),
    );
  }
}

enum LawButtonVariant { primary, outline, ghost, destructive }
```

### 7.2 卡片 (LawCard)

```dart
// lib/shared/widgets/cards/law_card.dart
class LawCard extends StatefulWidget {
  final Widget child;
  final VoidCallback? onTap;
  final bool showTopAccent;  // 顶部橙色装饰条
  
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: onTap,
      child: AnimatedContainer(
        duration: LegalMindDurations.normal,
        decoration: BoxDecoration(
          color: Colors.white,
          borderRadius: LegalMindRadius.cardRadius,
          boxShadow: [LegalMindShadows.cardShadow],
        ),
        child: ClipRRect(
          borderRadius: LegalMindRadius.cardRadius,
          child: Column(
            children: [
              if (showTopAccent)
                Container(
                  height: 3,
                  decoration: BoxDecoration(gradient: LegalMindColors.primaryGradient),
                ),
              Padding(
                padding: LegalMindSpacing.cardPadding,
                child: child,
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

### 7.3 输入框 (LawTextField)

```dart
// lib/shared/widgets/inputs/law_text_field.dart
class LawTextField extends StatelessWidget {
  final String label;
  final TextEditingController? controller;
  final String? errorText;
  final bool obscureText;
  
  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: controller,
      obscureText: obscureText,
      decoration: InputDecoration(
        labelText: label,
        errorText: errorText,
        border: OutlineInputBorder(
          borderRadius: LegalMindRadius.buttonRadius,
          borderSide: BorderSide(color: NeutralColors.neutral200),
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: LegalMindRadius.buttonRadius,
          borderSide: BorderSide(color: LegalMindColors.primary500, width: 2),
        ),
        contentPadding: EdgeInsets.symmetric(horizontal: 16, vertical: 14),
      ),
    );
  }
}
```

### 7.4 状态徽章 (StatusBadge)

```dart
// lib/shared/widgets/badges/status_badge.dart
class StatusBadge extends StatelessWidget {
  final String label;
  final BadgeVariant variant;
  
  Color get backgroundColor {
    switch (variant) {
      case BadgeVariant.success: return FunctionalColors.success.withOpacity(0.1);
      case BadgeVariant.warning: return FunctionalColors.warning.withOpacity(0.1);
      case BadgeVariant.error: return FunctionalColors.error.withOpacity(0.1);
      case BadgeVariant.info: return FunctionalColors.info.withOpacity(0.1);
      case BadgeVariant.neutral: return NeutralColors.neutral100;
    }
  }
  
  @override
  Widget build(BuildContext context) {
    return Container(
      padding: EdgeInsets.symmetric(horizontal: 8, vertical: 4),
      decoration: BoxDecoration(
        color: backgroundColor,
        borderRadius: LegalMindRadius.chipRadius,
      ),
      child: Text(
        label,
        style: TextStyle(
          fontSize: 12,
          fontWeight: FontWeight.w500,
          color: _foregroundColor,
        ),
      ),
    );
  }
}
```

---

## 八、布局模式

### 8.1 页面结构

```
┌─────────────────────────────┐
│      AppBar (56dp)          │  ← 标题 + 操作按钮
├─────────────────────────────┤
│                             │
│                             │
│        Content Area         │  ← 滚动内容
│                             │
│                             │
├─────────────────────────────┤
│    BottomNavigationBar      │  ← 主导航 (56dp + 安全区域)
└─────────────────────────────┘
```

### 8.2 主导航

```dart
// lib/app.dart
class MainScaffold extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: IndexedStack(
        index: currentIndex,
        children: [
          DashboardScreen(),
          CasesScreen(),
          TimeLogsScreen(),
          CalendarScreen(),
          ProfileScreen(),
        ],
      ),
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: currentIndex,
        type: BottomNavigationBarType.fixed,
        selectedItemColor: LegalMindColors.primary500,
        items: [
          BottomNavigationBarItem(icon: Icon(Icons.dashboard), label: '首页'),
          BottomNavigationBarItem(icon: Icon(Icons.folder), label: '案件'),
          BottomNavigationBarItem(icon: Icon(Icons.timer), label: '计时'),
          BottomNavigationBarItem(icon: Icon(Icons.calendar_today), label: '日程'),
          BottomNavigationBarItem(icon: Icon(Icons.person), label: '我的'),
        ],
      ),
    );
  }
}
```

---

## 九、响应式适配

### 9.1 断点定义

```dart
class Breakpoints {
  static const double mobile = 0;
  static const double tablet = 600;
  static const double desktop = 1024;
  
  static bool isMobile(BuildContext context) =>
    MediaQuery.of(context).size.width < tablet;
    
  static bool isTablet(BuildContext context) =>
    MediaQuery.of(context).size.width >= tablet &&
    MediaQuery.of(context).size.width < desktop;
}
```

### 9.2 平板适配

```dart
// 平板端使用分栏布局
class ResponsiveCaseListScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    if (Breakpoints.isTablet(context)) {
      return Row(
        children: [
          // 列表栏 (40%)
          Expanded(flex: 40, child: CaseListPane()),
          VerticalDivider(width: 1),
          // 详情栏 (60%)
          Expanded(flex: 60, child: CaseDetailPane()),
        ],
      );
    }
    return CaseListScreen();
  }
}
```

---

## 十、主题配置

### 10.1 完整 ThemeData

```dart
// lib/core/config/theme_config.dart
ThemeData buildLegalMindTheme({bool isDark = false}) {
  final colorScheme = isDark ? _darkColorScheme : _lightColorScheme;
  
  return ThemeData(
    useMaterial3: true,
    colorScheme: colorScheme,
    textTheme: LegalMindTypography.textTheme,
    fontFamily: LegalMindTypography.fontFamily,
    
    // AppBar
    appBarTheme: AppBarTheme(
      elevation: 0,
      backgroundColor: colorScheme.surface,
      foregroundColor: colorScheme.onSurface,
      titleTextStyle: LegalMindTypography.textTheme.headlineMedium,
    ),
    
    // Card
    cardTheme: CardTheme(
      elevation: 0,
      shape: RoundedRectangleBorder(borderRadius: LegalMindRadius.cardRadius),
      color: colorScheme.surface,
    ),
    
    // Button
    elevatedButtonTheme: ElevatedButtonThemeData(
      style: ElevatedButton.styleFrom(
        minimumSize: Size(64, TouchTargets.buttonHeight),
        shape: RoundedRectangleBorder(borderRadius: LegalMindRadius.buttonRadius),
        textStyle: LegalMindTypography.textTheme.labelLarge,
      ),
    ),
    
    // Input
    inputDecorationTheme: InputDecorationTheme(
      filled: true,
      fillColor: NeutralColors.neutral50,
      border: OutlineInputBorder(
        borderRadius: LegalMindRadius.buttonRadius,
        borderSide: BorderSide(color: NeutralColors.neutral200),
      ),
      contentPadding: EdgeInsets.symmetric(horizontal: 16, vertical: 14),
    ),
    
    // BottomNav
    bottomNavigationBarTheme: BottomNavigationBarThemeData(
      selectedItemColor: LegalMindColors.primary500,
      unselectedItemColor: NeutralColors.neutral500,
    ),
  );
}

final _lightColorScheme = ColorScheme.light(
  primary: LegalMindColors.primary500,
  primaryContainer: LegalMindColors.primary100,
  secondary: LegalMindColors.primary400,
  surface: Colors.white,
  background: NeutralColors.neutral50,
  error: FunctionalColors.error,
);

final _darkColorScheme = ColorScheme.dark(
  primary: LegalMindColors.primary500,
  primaryContainer: LegalMindColors.primary900,
  secondary: LegalMindColors.primary400,
  surface: DarkModeColors.card,
  background: DarkModeColors.background,
  error: FunctionalColors.error,
);
```

---

**下一步**: 查看 [05_离线与同步策略.md](./05_离线与同步策略.md) 了解离线数据管理方案
