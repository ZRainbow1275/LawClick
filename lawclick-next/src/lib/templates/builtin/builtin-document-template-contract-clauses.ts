export function appendCommonContractClauses(lines: string[]): void {
    const hasHeading = (heading: string) => lines.some((line) => line.trim() === heading.trim())
    const pushSection = (heading: string, body: string[]) => {
        if (hasHeading(heading)) return
        if (lines.length > 0 && lines[lines.length - 1] !== "") lines.push("")
        lines.push(heading)
        for (const line of body) lines.push(line)
    }

    pushSection("### 适用法律", [
        "本合同的订立、效力、解释、履行、变更、解除及争议解决适用中华人民共和国现行法律法规（不含冲突规范）。",
    ])

    pushSection("### 合规与反商业贿赂", [
        "各方承诺遵守反商业贿赂、反不正当竞争等法律法规，不得以任何形式向对方或第三方提供不正当利益；如发现违规线索，应及时通知并配合调查处理。",
    ])

    pushSection("### 个人信息与数据（如适用）", [
        "履行过程中涉及个人信息/重要数据处理的，各方应遵守数据安全与个人信息保护相关法律法规，并按最小必要原则处理；未经授权不得向第三方提供。",
        "如需跨境传输或委托处理，应另行签署数据处理协议并完成必要的合规评估/备案。",
    ])

    pushSection("### 陈述与保证", [
        "各方保证其具备签署与履行本合同的主体资格与授权，所提供信息真实、准确、完整；不存在影响本合同履行的重大违法违规或权利瑕疵。",
    ])

    pushSection("### 保密与信息安全", [
        "未经对方书面同意，不得向任何第三方披露在履行本合同过程中获悉的商业秘密与保密信息；法律法规另有规定或监管要求的除外。",
        "双方应采取合理的信息安全措施，防止资料泄露、篡改或丢失；发生安全事件应及时通知并采取补救措施。",
    ])

    pushSection("### 成果交付与权利归属（如适用）", [
        "在履行过程中形成的交付物（文书、报告、清单、备忘录等）归属与使用范围由各方另行约定；涉及知识产权的，按法律规定及本合同约定处理。",
        "交付物的验收标准、交付形式与版本管理可另行约定；未验收不影响保密与信息安全条款的效力。",
    ])

    pushSection("### 费用与票据（如适用）", [
        "除另有约定外，各方自行承担为签署与履行本合同所发生的成本与费用；需开具发票/票据的，按约定提供并完成开票。",
        "涉及税费承担、代扣代缴情形的，按法律规定与双方约定执行。",
    ])

    pushSection("### 违约责任", [
        "任何一方违反本合同约定应承担违约责任，包括但不限于继续履行、采取补救措施、赔偿损失等。",
        "可另行约定违约金、责任上限与免责情形：________（如适用）。",
    ])

    pushSection("### 责任限制（如适用）", [
        "除故意或重大过失外，一方对对方的间接损失、可得利益等不承担责任；可按约定设置责任上限：________。",
    ])

    pushSection("### 争议解决", [
        "因本合同产生或与本合同有关的争议，各方应先友好协商解决；协商不成的，提交________（仲裁委员会/有管辖权人民法院）处理。",
        "争议解决期间，除争议事项外，各方仍应继续履行不受影响的条款。",
    ])

    pushSection("### 通知与送达", [
        "各方确认以本合同载明的地址/邮箱/联系人作为通知与送达方式；一方信息变更应及时书面通知对方，否则承担不利后果。",
        "通知送达以签收回执、邮件投递记录或电子送达记录为准（如适用）。",
    ])

    pushSection("### 不可抗力", [
        "因不可抗力导致不能或迟延履行的，受影响方应及时通知并在合理期限内提供证明；各方可协商部分或全部免除责任。",
    ])

    pushSection("### 其他", [
        "本合同未尽事宜由各方协商一致以书面补充协议约定；补充协议与本合同具有同等法律效力。",
        "本合同自各方签字/盖章之日起生效；本合同文本一式________份，各方各执________份，具有同等法律效力（如适用）。",
    ])
}

